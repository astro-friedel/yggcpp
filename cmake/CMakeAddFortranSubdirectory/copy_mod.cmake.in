if(NOT OBJS)
  return()
endif()

cmake_path(REMOVE_FILENAME OBJS OUTPUT_VARIABLE objdir)
cmake_path(APPEND objdir "*.mod" OUTPUT_VARIABLE modpattern)
file(GLOB modfiles LIST_DIRECTORIES false ${modpattern})
message(STATUS "Fortran modules: ${modfiles}")
file(COPY ${modfiles} DESTINATION ${CMAKE_CURRENT_LIST_DIR})
message(STATUS "Copied Fortran modules to ${CMAKE_CURRENT_LIST_DIR}")

# if (WIN32)
#   cmake_path(APPEND objdir "*.def" OUTPUT_VARIABLE defpattern)
#   file(GLOB deffiles LIST_DIRECTORIES false ${defpattern})
#   message(STATUS "Fortran exports file: ${deffiles}")
#   file(COPY ${deffiles} DESTINATION ${CMAKE_CURRENT_LIST_DIR})
#   message(STATUS "Copied Fortran exports file to ${CMAKE_CURRENT_LIST_DIR}")
# endif()
